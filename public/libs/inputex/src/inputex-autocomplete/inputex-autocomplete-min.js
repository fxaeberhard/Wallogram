YUI.add("inputex-autocomplete",function(c){var b=c.Lang,a=c.inputEx;a.AutoComplete=function(d){a.AutoComplete.superclass.constructor.call(this,d)};c.extend(a.AutoComplete,a.StringField,{setOptions:function(d){a.AutoComplete.superclass.setOptions.call(this,d);this.options.className=d.className?d.className:"inputEx-Field inputEx-AutoComplete";this.options.allowFreeText=d.allowFreeText;this.options.autoComp=d.autoComp;this.options.returnValue=d.returnValue},initEvents:function(){a.AutoComplete.superclass.initEvents.call(this)},renderComponent:function(){this.wrapEl=a.cn("div",{className:"inputEx-StringField-wrapper"});var e={type:"text",id:c.guid()};if(this.options.size){e.size=this.options.size}if(this.options.readonly){e.readonly="readonly"}if(this.options.maxLength){e.maxLength=this.options.maxLength}this.el=a.cn("input",e);var f={type:"hidden",value:""};if(this.options.name){f.name=this.options.name}this.hiddenEl=a.cn("input",f);this.wrapEl.appendChild(this.el);this.wrapEl.appendChild(this.hiddenEl);this.fieldContainer.appendChild(this.wrapEl);var d=c.guid();this.listEl=a.cn("div",{id:d});this.fieldContainer.appendChild(this.listEl);c.on("available",this.buildAutocomplete,"#"+e.id,this);c.on("available",this.buildAutocomplete,"#"+d,this)},buildAutocomplete:function(){if(!this._nElementsReady){this._nElementsReady=0}this._nElementsReady++;if(this._nElementsReady!=2){return}this.yEl=c.one(this.el);this.yEl.plug(c.Plugin.AutoComplete,this.options.autoComp);this.yEl.ac.on("select",this.itemSelectHandler,this);this.yEl.on("blur",this.onBlur,this);if(this.options.allowFreeText){this.yEl.on("valueChange",function(){this.hiddenEl.value=this.el.value},this)}},itemSelectHandler:function(e){var d=e.result.raw;this.setValue(this.options.returnValue?this.options.returnValue(d):d.label)},onBlur:function(d){if(this.el.value==""&&this.options.typeInvite){c.one(this.divEl).addClass("inputEx-typeInvite");if(this.el.value==""){this.el.value=this.options.typeInvite}}this.setClassFromState()},setValue:function(e,d){this.hiddenEl.value=e||"";this.el.value=e||"";this.setClassFromState();if(d!==false){this.fireUpdatedEvt()}},getValue:function(){return this.hiddenEl.value}});a.registerType("autocomplete",a.AutoComplete)},"3.1.0",{requires:["inputex-string","autocomplete"]});