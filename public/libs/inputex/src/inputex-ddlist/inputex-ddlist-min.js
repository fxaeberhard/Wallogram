YUI.add("inputex-ddlist",function(f){var e=f.Lang,c=f.inputEx,b=f.Node.create,a=f.substitute,d;d=function(g){d.superclass.constructor.call(this,g)};d.LIST_TEMPLATE='<ul class="inputEx-ddlist">{items}</ul>';d.LIST_ITEM_CLASS="inputEx-ddlist-item";d.LIST_ITEM_TEMPLATE='<li class="{class}"><span class="inputEx-ddlist-item-label">{label}</span><input type="hidden" name="{name}" value="{value}" /></li>';f.extend(d,c.Field,{setOptions:function(g){d.superclass.setOptions.call(this,g);this.options.items=e.isArray(g.items)?g.items:[];this.options.valueKey=g.valueKey||"value";this.options.labelKey=g.labelKey||"label";this.options.name=g.name||f.guid();if(this.options.name.substr(-2)!=="[]"){this.options.name+="[]"}},renderComponent:function(){var h,g;h=f.Array.reduce(this.options.items,"",this.renderListItem,this);h=a(d.LIST_TEMPLATE,{items:h});g=b(h);g.appendTo(this.fieldContainer);this.sortable=new f.Sortable({container:g,nodes:"."+d.LIST_ITEM_CLASS,opacity:".1"});this.sortable.delegate.dd.on("drag:end",function(i){this.fireUpdatedEvt()},this)},renderListItem:function(g,h){return g+a(d.LIST_ITEM_TEMPLATE,{"class":d.LIST_ITEM_CLASS,value:h[this.options.valueKey],label:h[this.options.labelKey],name:this.options.name})},addItem:function(j){var i=this.sortable.get("container");var g=this.renderListItem("",j);var h=f.Node.create(g);i.append(h);this.sortable.sync()},removeItem:function(g){this.sortable.sync()},getValue:function(){return f.one(this.fieldContainer).all("."+d.LIST_ITEM_CLASS+" input").get("value")}});c.DDListField=d;c.registerType("ddlist",d)},"3.1.0",{requires:["inputex-field","array-extras","sortable","substitute"]});